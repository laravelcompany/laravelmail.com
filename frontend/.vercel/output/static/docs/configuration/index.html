<!DOCTYPE html><html dir=ltr lang=en><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="ie=edge" http-equiv=X-UA-Compatible><link href=/favicon.svg rel=icon type=image/svg+xml><meta charset=utf-8><meta content="index, follow" name=robots><meta content="index, follow" name=googlebot><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Astro v4.16.18" name=generator><link href=http://localhost:4321/docs/configuration/ rel=canonical><link href=/favicon.svg rel="shortcut icon" type=image/svg+xml><title>Learn how to use Laravel Mail Platform | Configuration | laravelmail.comConfiguration</title><meta content="Learn how to use Laravel Mail Platform |  Configuration |  laravelmail.comConfiguration" name=title><meta content="Community inspired Email Marketing Platform for your Laravel application. Reduce your marketing costs and focus on your business." name=description><meta content=website property=og:type><meta content=http://localhost:4321/docs/configuration/ property=og:url><meta content="Learn how to use Laravel Mail Platform |  Configuration |  laravelmail.comConfiguration" property=og:title><meta content="Community inspired Email Marketing Platform for your Laravel application. Reduce your marketing costs and focus on your business." property=og:description><meta content=http://localhost:4321/docs/configuration/og-image.jpg property=og:image><meta content=summary_large_image property=twitter:card><meta content=http://localhost:4321/docs/configuration/ property=twitter:url><meta content="Learn how to use Laravel Mail Platform |  Configuration |  laravelmail.comConfiguration" property=twitter:title><meta content="Community inspired Email Marketing Platform for your Laravel application. Reduce your marketing costs and focus on your business." property=twitter:description><meta content=http://localhost:4321/docs/configuration/og-image.jpg property=twitter:image><meta content=true name=astro-view-transitions-enabled><meta content=animate name=astro-view-transitions-fallback><link href=/_astro/buy.ClSWA6NE.css rel=stylesheet><style>:root{--radius-small:3px;--radius-large:6px;--gap-default:2rem;--font-measure:70ch;--font-family-default:"Open Sans",sans-serif;--font-family-special:"Open Sans",sans-serif;--font-color:var(--neutral-900);--action-color:var(--primary-300);--action-color-state:var(--primary-500);--background:var(--neutral-100);--primary-background:var(--primary-100);--neutral-background:var(--neutral-200)}.darkmode{--font-color:var(--neutral-100);--action-color:var(--secondary-100);--action-color-state:var(--secondary-500);--background:var(--dark-100);--primary-background:var(--primary-500);--neutral-background:var(--neutral-900)}body,html{height:100%;overflow-x:hidden}body{display:flex;flex-direction:column;color:var(--font-color);background-color:var(--background)}body main{flex:1 0 auto}body footer{flex-shrink:0}pre{padding:1rem;border-radius:.35rem;border:2px solid var(--action-color)}body .pagination a:focus-visible,body .pagination a:hover{background-color:var(--action-color-state)}body .pagination a:focus-visible svg path,body .pagination a:hover svg path{stroke:#fff}</style><script src=/_astro/hoisted.P4LudxNV.js type=module></script></head><body><script src="https://www.googletagmanager.com/gtag/js?id=G-V4RXY7MZHW" async></script><header><div class=skip-links><a href=#main-content>Skip to main content</a></div><script type=module>const skipLink=document.querySelector(".skip-links a");skipLink.addEventListener("keydown",(e=>{if(!e.target.closest("a"))return;if("Enter"!==e.key)return;e.preventDefault();const t=e.target.getAttribute("href");if(document.querySelector(t)){const e=document.querySelector(t);e.setAttribute("tabindex","-1"),e.focus()}else if(!document.querySelector(t)&&document.querySelector("h1")){const e=document.querySelector("h1");e.setAttribute("tabindex","-1"),e.focus()}else console.warn("SkipLinks are not set, either missing an h1 or main content id on the page.")}))</script><div class="is-desktop py-8" id=main-navigation><div class=container><a href=/ class="flex !no-underline gap-2 items-center" title="Laravel Mail"><span class=font-bold><h1>Laravel Mail</h1></span></a><div class=wrapper><nav aria-label="Main navigation desktop" class=desktop-menu><ul class=menu><li class=menu-item><a href=/ title="laravel mail platform">Home</a></li><li class=menu-item><a href=/templates title="laravel mail blade templates">Templates</a></li><li class=menu-item><a href=/docs/index title="documentation laravel mail platform">Docs</a></li><li class=menu-item><a href=/features title="features laravel mail platform">Features</a></li><li class=menu-item><a href=/try title="try laravel mail platform">Try</a></li><li class=menu-item><a href=/buy title="buy laravel mail platform">Buy</a></li><li class=menu-item><a href=/contact title="contact laravel agency essex">Contact</a></li></ul></nav><button class=darkmode-toggle aria-label="Toggle Dark Mode" aria-pressed=false data-astro-transition-persist=astro-ngeadvuk-1 data-initial-mode=auto><svg height=32 width=32 xmlns=http://www.w3.org/2000/svg aria-hidden=true viewBox="0 0 24 24"><path d="M9.353 3C5.849 4.408 3 7.463 3 11.47A9.53 9.53 0 0 0 12.53 21c4.007 0 7.062-2.849 8.47-6.353C8.17 17.065 8.14 8.14 9.353 3z" fill=currentColor></path></svg></button><script>!function(){let e=localStorage.getItem("darkMode");const a=document.querySelector(".darkmode-toggle"),t=(e=!0)=>{document.body.classList.add("darkmode"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="32" height="32" viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M13 3a1 1 0 1 0-2 0v1a1 1 0 1 0 2 0V3zM5.707 4.293a1 1 0 0 0-1.414 1.414l1 1a1 1 0 0 0 1.414-1.414l-1-1zm14 0a1 1 0 0 0-1.414 0l-1 1a1 1 0 0 0 1.414 1.414l1-1a1 1 0 0 0 0-1.414zM12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm-9 4a1 1 0 1 0 0 2h1a1 1 0 1 0 0-2H3zm17 0a1 1 0 1 0 0 2h1a1 1 0 1 0 0-2h-1zM6.707 18.707a1 1 0 1 0-1.414-1.414l-1 1a1 1 0 1 0 1.414 1.414l1-1zm12-1.414a1 1 0 0 0-1.414 1.414l1 1a1 1 0 0 0 1.414-1.414l-1-1zM13 20a1 1 0 1 0-2 0v1a1 1 0 1 0 2 0v-1z" fill="currentColor"/></svg>',a.setAttribute("aria-pressed","true"),e&&localStorage.setItem("darkMode","enabled")},d=(e=!0)=>{document.body.classList.remove("darkmode"),a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" width="32" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M9.353 3C5.849 4.408 3 7.463 3 11.47A9.53 9.53 0 0 0 12.53 21c4.007 0 7.062-2.849 8.47-6.353C8.17 17.065 8.14 8.14 9.353 3z"/></svg>',a.setAttribute("aria-pressed","false"),e&&localStorage.setItem("darkMode","disabled")},r=()=>{e?"enabled"===e?t():d():window.matchMedia("(prefers-color-scheme: dark)").matches?t(!1):d(!1)};r(),a.addEventListener("click",(()=>{e=document.body.classList.contains("darkmode"),e?d():t()})),document.addEventListener("astro:after-swap",(()=>{e=localStorage.getItem("darkMode"),r()}))}()</script><button class=responsive-toggle aria-label="Open menu navigation" aria-expanded=false data-astro-cid-3qc6hvr2><svg height=21 width=26 xmlns=http://www.w3.org/2000/svg aria-hidden=true data-astro-cid-3qc6hvr2 fill=var(--action-color)><path d="M2 1.667h24m-24 8h24m-24 8h24" data-astro-cid-3qc6hvr2 stroke=var(--action-color) stroke-linecap=round stroke-linejoin=round stroke-width=2.667></path></svg></button></div><nav aria-label="Main navigation mobile" class=mobile-menu><ul class=menu><li class=menu-item><a href=/ title="laravel mail platform">Home</a></li><li class=menu-item><a href=/templates title="laravel mail blade templates">Templates</a></li><li class=menu-item><a href=/docs/index title="documentation laravel mail platform">Docs</a></li><li class=menu-item><a href=/features title="features laravel mail platform">Features</a></li><li class=menu-item><a href=/try title="try laravel mail platform">Try</a></li><li class=menu-item><a href=/buy title="buy laravel mail platform">Buy</a></li><li class=menu-item><a href=/contact title="contact laravel agency essex">Contact</a></li></ul></nav></div></div></header><main class="flex container flex-1 flex-col md:flex-row"><div class="py-4 sticky hidden lg:w-1/5 max-h-static_sidemenu top-[69px] md:flex md:px-6 md:w-1/4"><style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(self.Astro||(self.Astro={})).only=async t=>{await(await t())()},window.dispatchEvent(new Event("astro:only")),(()=>{var t=Object.defineProperty,e=(e,r,n)=>((e,r,n)=>r in e?t(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n)(e,"symbol"!=typeof r?r+"":r,n);{let t={0:t=>s(t),1:t=>n(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(n(t)),5:t=>new Set(n(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},r=e=>{let[r,n]=e;return r in t?t[r](n):void 0},n=t=>t.map(r),s=t=>"object"!=typeof t||null===t?t:Object.fromEntries(Object.entries(t).map((([t,e])=>[t,r(e)])));class i extends HTMLElement{constructor(){super(...arguments),e(this,"Component"),e(this,"hydrator"),e(this,"hydrate",(async()=>{var t;if(!this.hydrator||!this.isConnected)return;let e=null==(t=this.parentElement)?void 0:t.closest("astro-island[ssr]");if(e)return void e.addEventListener("astro:hydrate",this.hydrate,{once:!0});let r,n=this.querySelectorAll("astro-slot"),i={},o=this.querySelectorAll("template[data-astro-template]");for(let t of o){let e=t.closest(this.tagName);null!=e&&e.isSameNode(this)&&(i[t.getAttribute("data-astro-template")||"default"]=t.innerHTML,t.remove())}for(let t of n){let e=t.closest(this.tagName);null!=e&&e.isSameNode(this)&&(i[t.getAttribute("name")||"default"]=t.innerHTML)}try{r=this.hasAttribute("props")?s(JSON.parse(this.getAttribute("props"))):{}}catch(t){let e=this.getAttribute("component-url")||"<unknown>",r=this.getAttribute("component-export");throw r&&(e+=` (export ${r})`),console.error(`[hydrate] Error parsing props for component ${e}`,this.getAttribute("props"),t),t}await this.hydrator(this)(this.Component,r,i,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))})),e(this,"unmount",(()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))}))}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(this.hasAttribute("await-children")&&"interactive"!==document.readyState&&"complete"!==document.readyState){let t=()=>{document.removeEventListener("DOMContentLoaded",t),e.disconnect(),this.childrenConnectedCallback()},e=new MutationObserver((()=>{var e;(null==(e=this.lastChild)?void 0:e.nodeType)===Node.COMMENT_NODE&&"astro:end"===this.lastChild.nodeValue&&(this.lastChild.remove(),t())}));e.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",t)}else this.childrenConnectedCallback()}async childrenConnectedCallback(){let t=this.getAttribute("before-hydration-url");t&&await import(t),this.start()}async start(){let t=JSON.parse(this.getAttribute("opts")),e=this.getAttribute("client");if(void 0!==Astro[e])try{await Astro[e]((async()=>{let t=this.getAttribute("renderer-url"),[e,{default:r}]=await Promise.all([import(this.getAttribute("component-url")),t?import(t):()=>()=>{}]),n=this.getAttribute("component-export")||"default";if(n.includes(".")){this.Component=e;for(let t of n.split("."))this.Component=this.Component[t]}else this.Component=e[n];return this.hydrator=r,this.hydrate}),t,this)}catch(t){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,t)}else window.addEventListener(`astro:${e}`,(()=>this.start()),{once:!0})}attributeChangedCallback(){this.hydrate()}}e(i,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",i)}})()</script><astro-island await-children="" client=only component-export=ScrollArea component-url=/_astro/scroll-area.CTuyje77.js opts={&quot;name&quot;:&quot;ScrollArea&quot;,&quot;value&quot;:&quot;react&quot;} props="{&quot;className&quot;:[0,&quot;h-full w-full&quot;]}" renderer-url=/_astro/client.BKlK2Vbq.js ssr="" uid=Z2qmpBg><template data-astro-template><ul class="list-none m-0"><li class=w-full><a href=/docs/campaigns class="w-full leading-none no-underline text-sm font-semibold">Campaigns</a></li><li class=w-full><a href=/docs/configuration class="w-full leading-none no-underline text-sm font-semibold">Configuration</a></li><li class=w-full><a href=/docs/deployment class="w-full leading-none no-underline text-sm font-semibold">Deployment</a></li><li class=w-full><a href=/docs/email-services class="w-full leading-none no-underline text-sm font-semibold">Email Services</a></li><li class=w-full><a href=/docs/index class="w-full leading-none no-underline text-sm font-semibold">Instalation</a></li><li class=w-full><a href=/docs/messages class="w-full leading-none no-underline text-sm font-semibold">Messages</a></li><li class=w-full><a href=/docs/package-instalation class="w-full leading-none no-underline text-sm font-semibold">Package Installation</a></li><li class=w-full><a href=/docs/subscribers class="w-full leading-none no-underline text-sm font-semibold">Subscribers</a></li><li class=w-full><a href=/docs/tags class="w-full leading-none no-underline text-sm font-semibold">Tags</a></li><li class=w-full><a href=/docs/templates class="w-full leading-none no-underline text-sm font-semibold">Templates</a></li><li class=w-full><a href=/docs/workspaces class="w-full leading-none no-underline text-sm font-semibold">Workspaces</a></li></ul></template><!--astro:end--></astro-island></div><div class="w-full lg:w-3/5 md:w-3/4"><div class="pt-4 bg-background min-h-static_sidemenu px-6"><h1 class="italic pb-2">Configuration</h1><div class="pt-4 prose"><p><img alt=https://leadscaptain.com/images/logo.svg src=https://leadscaptain.com/images/logo.svg /></p><h2 id=creating-configuration-file>Creating Configuration File</h2><p>Laravel Mail Platform’s configuration is handled through the<code>.env</code> file. By default, this file does not exist. To create it manually, you will need to clone the included <code>.env.example</code>, rename it to <code>.env</code> and make changes as necessary.</p><blockquote><p>Any keys that are set in the <code>.env</code> file will be used, even if they are blank. If you do not wish to actively set a key, you should remove it from your <code>.env</code> file, rather than leave it blank.</p></blockquote><h3 id=key-generation>Key Generation</h3><p>If you did not run the setup command, or if for some reason the <code>APP_KEY</code> value is empty, you will need to create an encryption key. This is used by Laravel Mail Platform to apply encryption to things like user sessions.</p><p>To generate a new key, you should run the following command:</p><pre class="astro-code astro-code-themes catppuccin-latte catppuccin-macchiato" data-language=bash style=background-color:#eff1f5;--shiki-dark-bg:#24273a;color:#4c4f69;--shiki-dark:#cad3f5;overflow-x:auto tabindex=0><code><span class=line><span style=color:#1e66f5;font-style:italic;--shiki-dark:#8AADF4;--shiki-dark-font-style:italic>php</span><span style=color:#40a02b;--shiki-dark:#A6DA95> artisan</span><span style=color:#40a02b;--shiki-dark:#A6DA95> key:generate</span></span>
<span class=line></span></code></pre><blockquote><p>Although key generation can be run again, this will invalidate any sessions or make any stored encrypted data inaccessible. You should not generate a new key unless absolutely necessary.</p></blockquote><h3 id=base-url>Base URL</h3><p>You will need to set the <code>APP_URL</code> variable in the <code>.env</code> file to the base URL for your installation of Laravel Mail Platform.</p><p>For example, if you are hosting your installation of Laravel Mail Platform at <code>campaigns.example.com</code>, you will need to set the following:</p><pre class="astro-code astro-code-themes catppuccin-latte catppuccin-macchiato" data-language=plaintext style=background-color:#eff1f5;--shiki-dark-bg:#24273a;color:#4c4f69;--shiki-dark:#cad3f5;overflow-x:auto tabindex=0><code><span class=line><span>APP_URL=https://campaigns.example.com</span></span>
<span class=line><span></span></span></code></pre><p>This is necessary to allow Laravel Mail Platform to correctly generate unsubscribe links, or links for user registration emails.</p><h3 id=database-connection>Database Connection</h3><p>In order for Laravel Mail Platform to connect to your database, you must set the database configuration values in the <code>.env</code> file.</p><p>Firstly, you need to specify what type of database you are using by setting the <code>DB_CONNECTION</code> value to either <code>mysql</code> for a MySQL database or <code>pgsql</code> for a PostgreSQL database.</p><p>Secondly, you need to set the connection details for your database installation. The following values need to be set:</p><ul><li><code>DB_HOST</code> – This is the host of your database, e.g. <code>127.0.0.1</code> for a local installation</li><li><code>DB_PORT</code> - The port Laravel Mail Platform should use to talk to your database</li><li><code>DB_DATABASE</code> – The database Laravel Mail Platform should use to store its data</li><li><code>DB_USERNAME</code> – The username Laravel Mail Platform will use to authenticate itself with your database</li><li><code>DB_PASSWORD</code> – The password Laravel Mail Platform will use to authenticate itself with your database</li></ul><h3 id=database-migrations>Database Migrations</h3><p>To set up the database schema, migrations must be run. Migrations are instructions an application uses to configure database schema, running in sequence from beginning to end in order to ensure that the database is set up as the application expects it to be.</p><blockquote><p>Do not make custom modifications to the database yourself. Any database changes that Laravel Mail Platform requires should be accomplished through the running of migrations.</p></blockquote><blockquote><p>Before running migrations, ensure that you have correctly configured your database connection, as schema changes will be made.</p></blockquote><p>The included command-line setup command will run migrations for you (after a prompt), but you can run migrations manually using the following command:</p><pre class="astro-code astro-code-themes catppuccin-latte catppuccin-macchiato" data-language=bash style=background-color:#eff1f5;--shiki-dark-bg:#24273a;color:#4c4f69;--shiki-dark:#cad3f5;overflow-x:auto tabindex=0><code><span class=line><span style=color:#1e66f5;font-style:italic;--shiki-dark:#8AADF4;--shiki-dark-font-style:italic>php</span><span style=color:#40a02b;--shiki-dark:#A6DA95> artisan</span><span style=color:#40a02b;--shiki-dark:#A6DA95> migrate:fresh</span><span style=color:#40a02b;--shiki-dark:#A6DA95> ---seed</span></span>
<span class=line></span></code></pre><h3 id=publishing-vendor-files>Publishing Vendor Files</h3><p>Run the following command to publish the config, views, languages and assets from Laravel Mail Platform to your project:</p><pre class="astro-code astro-code-themes catppuccin-latte catppuccin-macchiato" data-language=bash style=background-color:#eff1f5;--shiki-dark-bg:#24273a;color:#4c4f69;--shiki-dark:#cad3f5;overflow-x:auto tabindex=0><code><span class=line><span style=color:#1e66f5;font-style:italic;--shiki-dark:#8AADF4;--shiki-dark-font-style:italic>php</span><span style=color:#40a02b;--shiki-dark:#A6DA95> artisan</span><span style=color:#40a02b;--shiki-dark:#A6DA95> vendor:publish</span><span style=color:#40a02b;--shiki-dark:#A6DA95> --provider=Laravel</span><span style=color:#40a02b;--shiki-dark:#A6DA95> Mail</span><span style=color:#40a02b;--shiki-dark:#A6DA95> Platform</span><span style=color:#ea76cb;--shiki-dark:#F5BDE6>\\</span><span style=color:#40a02b;--shiki-dark:#A6DA95>Base</span><span style=color:#ea76cb;--shiki-dark:#F5BDE6>\\</span><span style=color:#40a02b;--shiki-dark:#A6DA95>Laravel</span><span style=color:#40a02b;--shiki-dark:#A6DA95> Mail</span><span style=color:#40a02b;--shiki-dark:#A6DA95> LaravelMailServiceProvider</span></span>
<span class=line></span></code></pre><h3 id=workspaces--users>Workspaces &amp; Users</h3><p>If you do not use the setup command to create a workspace and user with which to administer Laravel Mail Platform, you will need to go through the web interface registration process.</p><p>You must follow the User Management Email configuration specified in Additional Configuration in order to allow registration and user invitation in Laravel Mail Platform.</p><h2 id=additional-configuration>Additional Configuration</h2><h3 id=cron-jobs>Cron Jobs</h3><p>Laravel Mail Platform makes use of regular background tasks and it is therefore essential to create a cron job to run every minute:</p><pre class="astro-code astro-code-themes catppuccin-latte catppuccin-macchiato" data-language=bash style=background-color:#eff1f5;--shiki-dark-bg:#24273a;color:#4c4f69;--shiki-dark:#cad3f5;overflow-x:auto tabindex=0><code><span class=line><span style=color:#179299;--shiki-dark:#8BD5CA>*</span><span style=color:#179299;--shiki-dark:#8BD5CA> *</span><span style=color:#179299;--shiki-dark:#8BD5CA> *</span><span style=color:#179299;--shiki-dark:#8BD5CA> *</span><span style=color:#179299;--shiki-dark:#8BD5CA> *</span><span style=color:#4c4f69;--shiki-dark:#CAD3F5> cd /path-to-your-project </span><span style=color:#7c7f93;--shiki-dark:#939AB7>&amp;&amp;</span><span style=color:#1e66f5;font-style:italic;--shiki-dark:#8AADF4;--shiki-dark-font-style:italic> php</span><span style=color:#40a02b;--shiki-dark:#A6DA95> artisan</span><span style=color:#40a02b;--shiki-dark:#A6DA95> schedule:run</span><span style=color:#179299;--shiki-dark:#8BD5CA> &gt;&gt;</span><span style=color:#40a02b;--shiki-dark:#A6DA95> /dev/null</span><span style=color:#179299;--shiki-dark:#8BD5CA> 2&gt;&amp;1</span></span>
<span class=line></span></code></pre><p>Please refer to the Laravel documentation on <a href=https://laravel.com/docs/scheduling rel=nofollow target=_blank>Task Scheduling</a> for further information.</p><h3 id=message-sending--queues>Message Sending &amp; Queues</h3><p>Laravel Mail Platform sends email messages using a queue system. The queue can be processed synchronously or asynchronously. Asynchronous queues can be handled via your primary database or via redis.</p><p>You can specify which queue driver to use in the <code>QUEUE_CONNECTION</code> parameter in the <code>.env</code> file. This should be set to one of <code>sync</code>, <code>database</code> or <code>redis</code>, depending on your requirements. This configuration applies to all messages sent in Laravel Mail Platform and cannot be changed on a per-user, per-workspace or per-provider basis.</p><h4 id=sync>Sync</h4><p>The synchronous queue runs any queued jobs as they are requested, requiring the user to wait until the job has been completed before any further action can be taken.</p><p>This has the advantage of being simple and requiring no additional configuration. However, as this does not scale well, this approach is only recommended for relatively small message sending requirements.</p><p>To use the synchronous queue, you only need to set the <code>QUEUE_CONNECTION</code> to <code>sync</code>, and no further configuration is required.</p><h4 id=database>Database</h4><p>Processing asynchronous queues via the database is considered a middle option. Running an asynchronous queue avoids the issues that come up using a synchronous queue, as messages can be processed without blocking further action being taken by the user, and will work until all jobs are completed regardless of how long it takes.</p><p>The advantage of using the database for running the asynchronous queue is that it requires no extra services to be run, as it uses the primary database (MySQL or Postgres) that you have already configured for Laravel Mail Platform.</p><p>The main disadvantage is that under heavy workloads the queue can negatively affect the performance of the database.</p><p>As such, the database queue is recommended for small to medium sized mailing lists.</p><p>To use the database driver, you must first set the <code>QUEUE_CONNECTION</code> to <code>database</code> in your <code>.env</code> file. You also need to run the following commands, which will create a new <code>jobs</code> table in your database, which that will be used to manage the queue.</p><pre class="astro-code astro-code-themes catppuccin-latte catppuccin-macchiato" data-language=bash style=background-color:#eff1f5;--shiki-dark-bg:#24273a;color:#4c4f69;--shiki-dark:#cad3f5;overflow-x:auto tabindex=0><code><span class=line><span style=color:#1e66f5;font-style:italic;--shiki-dark:#8AADF4;--shiki-dark-font-style:italic>php</span><span style=color:#40a02b;--shiki-dark:#A6DA95> artisan</span><span style=color:#40a02b;--shiki-dark:#A6DA95> queue:table</span></span>
<span class=line><span style=color:#1e66f5;font-style:italic;--shiki-dark:#8AADF4;--shiki-dark-font-style:italic>php</span><span style=color:#40a02b;--shiki-dark:#A6DA95> artisan</span><span style=color:#40a02b;--shiki-dark:#A6DA95> migrate</span></span>
<span class=line></span></code></pre><h4 id=redis>Redis</h4><p>Redis is the recommended solution for running medium to large mailing lists.</p><p>You will of course need an installation of redis on your server. You will then need to set the <code>QUEUE_CONNECTION</code> to <code>redis</code> and set the following configuration values in your <code>.env</code> file:</p><ul><li><code>REDIS_HOST</code></li><li><code>REDIS_PASSWORD</code></li><li><code>REDIS_PORT</code></li></ul><h3 id=running-the-queue-without-laravel-horizon>Running the queue without Laravel Horizon</h3><p>If you don’t want to use Horizon to manage you redis queue or you’re using the database driver you will have to run a <a href=https://laravel.com/docs/queues#running-the-queue-worker rel=nofollow target=_blank>queue worker</a> for each queue that Laravel Mail Platform uses.</p><ul><li><code>Laravel Mail Platform-message-dispatch</code>: dispatches messages to the email service</li><li><code>Laravel Mail Platform-webhook-process</code>: processes incoming webhooks</li></ul><pre class="astro-code astro-code-themes catppuccin-latte catppuccin-macchiato" data-language=plaintext style=background-color:#eff1f5;--shiki-dark-bg:#24273a;color:#4c4f69;--shiki-dark:#cad3f5;overflow-x:auto tabindex=0><code><span class=line><span>php artisan queue:work --queue=Laravel Mail Platform-message-dispatch</span></span>
<span class=line><span>php artisan queue:work --queue=Laravel Mail Platform-webhook-process</span></span>
<span class=line><span></span></span></code></pre><h3 id=running-redis-queues-with-laravel-horizon>Running Redis Queues With Laravel Horizon</h3><p>Laravel Mail Platform bundles <a href=https://laravel.com/docs/horizon rel=nofollow target=_blank>Laravel Horizon</a> as an easy way to run and manage redis queues.</p><p>Configuration for the queues necessary to run Laravel Mail Platform is already included. In order to use Horizon as your queue manager, you should first publish the Horizon assets:</p><pre class="astro-code astro-code-themes catppuccin-latte catppuccin-macchiato" data-language=plaintext style=background-color:#eff1f5;--shiki-dark-bg:#24273a;color:#4c4f69;--shiki-dark:#cad3f5;overflow-x:auto tabindex=0><code><span class=line><span>php artisan horizon:publish</span></span>
<span class=line><span></span></span></code></pre><p>To start processing your queue items with Horizon, you simply need to run the following command:</p><pre class="astro-code astro-code-themes catppuccin-latte catppuccin-macchiato" data-language=plaintext style=background-color:#eff1f5;--shiki-dark-bg:#24273a;color:#4c4f69;--shiki-dark:#cad3f5;overflow-x:auto tabindex=0><code><span class=line><span>php artisan horizon</span></span>
<span class=line><span></span></span></code></pre><p>When using Horizon in production, you should consider using a service to ensure the queue runner restarts if it fails for any reason. The Horizon documentation has a <a href=https://laravel.com/docs/horizon#deploying-horizon rel=nofollow target=_blank>guide</a> on how to use Supervisor to do this.</p><h4 id=autoscaling>Autoscaling</h4><p>The configuration for Horizon included with Laravel Mail Platform allows autoscaling of queue workers. By default, webhooks received and messages sent via the queue each have a minimum of 2 processes running, and a maximum of 10 or 20. If these values do not suit your requirements, they can be adjusted in the <code>config/horizon.php</code> file—in particular <code>supervisor-2</code> and <code>supervisor-3</code>—using the <code>minProcesses</code> and <code>maxProcesses</code> values.</p><h3 id=user-management-email>User Management Email</h3><p>In order to use user management functionality (for example, inviting new users or password resets) in Laravel Mail Platform, it is necessary to set up an email service that Laravel Mail Platform can use to send the messages.</p><blockquote><p>If you are not going to be inviting any other users or team members to your Laravel Mail Platform installation, then this section can be ignored.</p></blockquote><blockquote><p>There is no relationship between Laravel Mail Platform’s internal mail configuration and any email services that are configured for a workspace.</p></blockquote><blockquote><p>You will need to set <code>Laravel Mail Platform_REGISTER=true</code> in the <code>.env</code> file in order to use the registration and user invitation functionality.</p></blockquote><blockquote><p>By default, users are granted the ability to reset their passwords. If you wish to disable password resets, you must set <code>Laravel Mail Platform_PASSWORD_RESET=false</code> in the <code>.env</code> file.</p></blockquote><p>You first need to set <code>MAIL_MAILER</code> to your chosen service. The options here are <code>smtp</code>, <code>sendmail</code>, <code>ses</code>, <code>mailgun</code> and <code>postmark</code>.</p><h4 id=smtp--sendmail>SMTP &amp; Sendmail</h4><p>When using a regular SMTP provider, or sendmail, you should set the following configuration values:</p><ul><li><code>MAIL_HOST</code> – This is the host for the SMTP server</li><li><code>MAIL_PORT</code> – This is the port that will be used to connect to the SMTP server</li><li><code>MAIL_USERNAME</code> – The username used to authenticate with the SMTP server</li><li><code>MAIL_PASSWORD</code> – The password used to authenticate with the SMTP server</li><li><code>MAIL_FROM_ADDRESS</code> – The address that mail will appear to come from</li><li><code>MAIL_FROM_NAME</code> – The name that mail will appear to come from</li></ul><h4 id=ses>SES</h4><p>When using SES as your mail service, you should set the following configuration values, adding them to the <code>.env</code> file if they are not already present:</p><ul><li><code>AWS_ACCESS_KEY_ID</code> – Your AWS ID key</li><li><code>AWS_SECRET_ACCESS_KEY</code> – Your AWS secret key</li><li><code>AWS_DEFAULT_REGION</code> – Your AWS region (defaults to <code>us-east-1</code> if not included in the configuration file)</li></ul><h4 id=mailgun>Mailgun</h4><p>When using Mailgun as your mail service, you should set the following configuration values, adding them to the <code>.env</code> file if they are not already present:</p><ul><li><code>MAILGUN_DOMAIN</code></li><li><code>MAILGUN_SECRET</code></li><li><code>MAILGUN_ENDPOINT</code> – (defaults to <code>api.mailgun.net</code> if not included in the configuration file)</li></ul><h4 id=postmark>Postmark</h4><p>When using Postmark as your mail service, you should set the following configuration values, adding them to the <code>.env</code> file if they are not already present:</p><ul><li><code>POSTMARK_TOKEN</code></li></ul></div><div class="flex bottom-8 duration-300 justify-center opacity-0 py-4 sticky transition-opacity"><div class=w-fit id=back-to-top onclick=scrollToTop()><button class="text-sm bg-secondary disabled:opacity-50 disabled:pointer-events-none focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring font-medium gap-2 h-9 hover:bg-secondary/80 inline-flex items-center justify-center rounded-md shadow-sm text-secondary-foreground transition-colors w-9 whitespace-nowrap"><svg height=24 width=24 xmlns=http://www.w3.org/2000/svg fill=none class="lucide lucide-chevron-up" stroke=currentColor stroke-linecap=round stroke-linejoin=round stroke-width=2 viewBox="0 0 24 24"><path d="m18 15-6-6-6 6"></path></svg></button></div></div><script>const backToTopButton=document.getElementById("back-to-top"),toggleVisibility=()=>{window.scrollY>window.innerHeight/2?(backToTopButton.classList.remove("opacity-0"),backToTopButton.classList.add("opacity-100")):(backToTopButton.classList.remove("opacity-100"),backToTopButton.classList.add("opacity-0"))},scrollToTop=()=>{window.scrollTo({top:0,behavior:"smooth"})};window.addEventListener("scroll",toggleVisibility)</script></div></div><div class="py-4 sticky hidden lg:w-1/5 max-h-static_sidemenu top-[69px] lg:flex px-6"><astro-island await-children="" client=only component-export=ScrollArea component-url=/_astro/scroll-area.CTuyje77.js opts={&quot;name&quot;:&quot;ScrollArea&quot;,&quot;value&quot;:&quot;react&quot;} props="{&quot;className&quot;:[0,&quot;h-full w-full&quot;]}" renderer-url=/_astro/client.BKlK2Vbq.js ssr="" uid=Z2qmpBg><template data-astro-template><div class=relative><h2 class="italic border-none text-xl">On This Page</h2><ul class="list-none m-0"><li class=font-semibold><a href=#creating-configuration-file class="w-full leading-none no-underline text-sm">Creating Configuration File</a></li><li class=text-muted-foreground><a href=#key-generation class="w-full leading-none no-underline text-sm">Key Generation</a></li><li class=text-muted-foreground><a href=#base-url class="w-full leading-none no-underline text-sm">Base URL</a></li><li class=text-muted-foreground><a href=#database-connection class="w-full leading-none no-underline text-sm">Database Connection</a></li><li class=text-muted-foreground><a href=#database-migrations class="w-full leading-none no-underline text-sm">Database Migrations</a></li><li class=text-muted-foreground><a href=#publishing-vendor-files class="w-full leading-none no-underline text-sm">Publishing Vendor Files</a></li><li class=text-muted-foreground><a href=#workspaces--users class="w-full leading-none no-underline text-sm">Workspaces &amp; Users</a></li><li class=font-semibold><a href=#additional-configuration class="w-full leading-none no-underline text-sm">Additional Configuration</a></li><li class=text-muted-foreground><a href=#cron-jobs class="w-full leading-none no-underline text-sm">Cron Jobs</a></li><li class=text-muted-foreground><a href=#message-sending--queues class="w-full leading-none no-underline text-sm">Message Sending &amp; Queues</a></li><li class=text-muted-foreground><a href=#sync class="w-full leading-none no-underline text-sm">Sync</a></li><li class=text-muted-foreground><a href=#database class="w-full leading-none no-underline text-sm">Database</a></li><li class=text-muted-foreground><a href=#redis class="w-full leading-none no-underline text-sm">Redis</a></li><li class=text-muted-foreground><a href=#running-the-queue-without-laravel-horizon class="w-full leading-none no-underline text-sm">Running the queue without Laravel Horizon</a></li><li class=text-muted-foreground><a href=#running-redis-queues-with-laravel-horizon class="w-full leading-none no-underline text-sm">Running Redis Queues With Laravel Horizon</a></li><li class=text-muted-foreground><a href=#autoscaling class="w-full leading-none no-underline text-sm">Autoscaling</a></li><li class=text-muted-foreground><a href=#user-management-email class="w-full leading-none no-underline text-sm">User Management Email</a></li><li class=text-muted-foreground><a href=#smtp--sendmail class="w-full leading-none no-underline text-sm">SMTP &amp; Sendmail</a></li><li class=text-muted-foreground><a href=#ses class="w-full leading-none no-underline text-sm">SES</a></li><li class=text-muted-foreground><a href=#mailgun class="w-full leading-none no-underline text-sm">Mailgun</a></li><li class=text-muted-foreground><a href=#postmark class="w-full leading-none no-underline text-sm">Postmark</a></li></ul></div></template><!--astro:end--></astro-island></div></main></body></html>